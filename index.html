<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2670.3">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #71c083; -webkit-text-stroke: #71c083}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d7378; -webkit-text-stroke: #6d7378}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 16.0px}
    span.s1 {font-kerning: none; background-color: #171818}
    span.s2 {font-kerning: none; color: #8cd3fe; background-color: #171818; -webkit-text-stroke: 0px #8cd3fe}
    span.s3 {font-kerning: none; color: #6d6d6d; background-color: #171818; -webkit-text-stroke: 0px #6d6d6d}
    span.s4 {font-kerning: none; color: #cacaca; background-color: #171818; -webkit-text-stroke: 0px #cacaca}
    span.s5 {font-kerning: none; color: #c27e65; background-color: #171818; -webkit-text-stroke: 0px #c27e65}
    span.s6 {font-kerning: none; color: #4689cc; background-color: #171818; -webkit-text-stroke: 0px #4689cc}
    span.s7 {font-kerning: none; color: #d4d4d4; background-color: #171818; -webkit-text-stroke: 0px #d4d4d4}
    span.s8 {font-kerning: none; color: #71c083; background-color: #171818; -webkit-text-stroke: 0px #71c083}
    span.s9 {font-kerning: none}
    span.s10 {font-kerning: none; color: #a7c598; background-color: #171818; -webkit-text-stroke: 0px #a7c598}
    span.s11 {font-kerning: none; color: #b76ff7; background-color: #171818; -webkit-text-stroke: 0px #b76ff7}
    span.s12 {font-kerning: none; color: #36c0a0; background-color: #171818; -webkit-text-stroke: 0px #36c0a0}
    span.s13 {font-kerning: none; color: #f67c30; background-color: #171818; -webkit-text-stroke: 0px #f67c30}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">html</span><span class="s4"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s5">"en"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s5">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s4"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">title</span><span class="s3">&gt;</span><span class="s1">Dormie | PDF Link Status Checker</span><span class="s3">&lt;/</span><span class="s6">title</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">link</span><span class="s4"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"preconnect"</span><span class="s4"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.googleapis.com"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">link</span><span class="s4"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"preconnect"</span><span class="s4"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.gstatic.com"</span><span class="s4"> </span><span class="s2">crossorigin</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">link</span><span class="s4"> </span><span class="s2">href</span><span class="s3">=</span><span class="s1">"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&amp;family=Libre+Baskerville&amp;display=swap"</span><span class="s4"> </span><span class="s2">rel</span><span class="s3">=</span><span class="s1">"stylesheet"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>tailwind</span><span class="s7">.</span><span class="s1">config </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>theme</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>extend</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>colors</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">'dormie-sage'</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'#A8AD97'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">'dormie-beige'</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'#F9F7F2'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">'dormie-dark'</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'#3D3D3D'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">'dormie-accent'</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'#EAE8E3'</span><span class="s7">,</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s1">'dormie-offwhite'</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'#FCFCFA'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">'dormie-warn'</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'#D97706'</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">},</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>fontFamily</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s8">'sans'</span><span class="s7">:</span><span class="s1"> </span><span class="s7">[</span><span class="s8">'Inter'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'sans-serif'</span><span class="s7">],</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s1">'serif'</span><span class="s7">:</span><span class="s4"> </span><span class="s7">[</span><span class="s1">'Libre Baskerville'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'serif'</span><span class="s7">],</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s6">body</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">font-family:</span><span class="s4"> </span><span class="s8">'Inter'</span><span class="s7">,</span><span class="s4"> </span><span class="s5">sans-serif</span><span class="s7">;</span><span class="s4"> </span><span class="s1">background-color:</span><span class="s4"> #F9F7F2</span><span class="s7">;</span><span class="s4"> </span><span class="s1">color:</span><span class="s4"> #3D3D3D</span><span class="s7">;</span><span class="s4"> </span><span class="s1">scroll-behavior:</span><span class="s4"> </span><span class="s5">smooth</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s6">pdfjsLib.GlobalWorkerOptions.workerSrc</span><span class="s4"> = `</span><span class="s6">https:</span><span class="s1">//cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js`;</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s6">.status-chip</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">display:</span><span class="s4"> </span><span class="s5">inline-flex</span><span class="s7">;</span><span class="s4"> </span><span class="s1">align-items:</span><span class="s4"> </span><span class="s5">center</span><span class="s7">;</span><span class="s4"> </span><span class="s1">padding:</span><span class="s4"> </span><span class="s10">0.25rem</span><span class="s4"> </span><span class="s10">0.6rem</span><span class="s7">;</span><span class="s4"> </span><span class="s1">border-radius:</span><span class="s4"> </span><span class="s10">9999px</span><span class="s7">;</span><span class="s4"> </span><span class="s1">font-size:</span><span class="s4"> </span><span class="s10">0.8rem</span><span class="s7">;</span><span class="s4"> </span><span class="s1">font-weight:</span><span class="s4"> </span><span class="s10">500</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s6">.status-chip</span><span class="s4"> </span><span class="s6">.dot</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">width:</span><span class="s4"> </span><span class="s10">6px</span><span class="s7">;</span><span class="s4"> </span><span class="s1">height:</span><span class="s4"> </span><span class="s10">6px</span><span class="s7">;</span><span class="s4"> </span><span class="s1">border-radius:</span><span class="s4"> </span><span class="s10">50%</span><span class="s7">;</span><span class="s4"> </span><span class="s1">margin-right:</span><span class="s4"> </span><span class="s10">6px</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.status-ok</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">color:</span><span class="s1"> #166534</span><span class="s7">;</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #ECFDF5</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s6">.status-ok</span><span class="s1"> </span><span class="s6">.dot</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #22C55E</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.status-blocked</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">color:</span><span class="s1"> #92400E</span><span class="s7">;</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #FFFBEB</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s6">.status-blocked</span><span class="s1"> </span><span class="s6">.dot</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #F59E0B</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.status-broken</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">color:</span><span class="s1"> #991B1B</span><span class="s7">;</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #FEF2F2</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s6">.status-broken</span><span class="s1"> </span><span class="s6">.dot</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #EF4444</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.status-checking</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">color:</span><span class="s1"> #374151</span><span class="s7">;</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #F3F4F6</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s6">.status-checking</span><span class="s1"> </span><span class="s6">.dot</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #6B7280</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.status-error</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">color:</span><span class="s1"> #374151</span><span class="s7">;</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #F3F4F6</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s6">.status-error</span><span class="s1"> </span><span class="s6">.dot</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #EF4444</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.status-manual-ok</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">color:</span><span class="s1"> #166534</span><span class="s7">;</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #ECFDF5</span><span class="s7">;</span><span class="s1"> </span><span class="s2">border:</span><span class="s1"> </span><span class="s10">1px</span><span class="s1"> </span><span class="s5">solid</span><span class="s1"> #D1FAE5</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s6">.status-manual-ok</span><span class="s1"> </span><span class="s6">.dot</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #22C55E</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.status-manual-broken</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">color:</span><span class="s1"> #991B1B</span><span class="s7">;</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #FEF2F2</span><span class="s7">;</span><span class="s1"> </span><span class="s2">border:</span><span class="s1"> </span><span class="s10">1px</span><span class="s1"> </span><span class="s5">solid</span><span class="s1"> #FEE2E2</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s6">.status-manual-broken</span><span class="s1"> </span><span class="s6">.dot</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #EF4444</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.status-manual-required</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">color:</span><span class="s1"> #92400E</span><span class="s7">;</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #FFFBEB</span><span class="s7">;</span><span class="s1"> </span><span class="s2">border:</span><span class="s1"> </span><span class="s10">1px</span><span class="s1"> </span><span class="s5">solid</span><span class="s1"> #FEF3C7</span><span class="s7">;}</span><span class="s1"> </span><span class="s6">.status-manual-required</span><span class="s1"> </span><span class="s6">.dot</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #F59E0B</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s6">.drag-over</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">border-color:</span><span class="s4"> #A8AD97</span><span class="s7">;</span><span class="s4"> </span><span class="s1">background-color:</span><span class="s4"> #EFEBE4</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s6">.indicator-bulb</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">width:</span><span class="s4"> </span><span class="s10">10px</span><span class="s7">;</span><span class="s4"> </span><span class="s1">height:</span><span class="s4"> </span><span class="s10">10px</span><span class="s7">;</span><span class="s4"> </span><span class="s1">border-radius:</span><span class="s4"> </span><span class="s10">50%</span><span class="s7">;</span><span class="s4"> </span><span class="s1">display:</span><span class="s4"> </span><span class="s5">inline-block</span><span class="s7">;</span><span class="s4"> </span><span class="s1">margin-right:</span><span class="s4"> </span><span class="s10">10px</span><span class="s7">;</span><span class="s4"> </span><span class="s1">transition:</span><span class="s4"> </span><span class="s5">background-color</span><span class="s4"> </span><span class="s10">0.3s</span><span class="s4"> </span><span class="s5">ease</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.bulb-red</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #EF4444</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.bulb-yellow</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #F59E0B</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.bulb-green</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">background-color:</span><span class="s1"> #22C55E</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.highlight-problem</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s2">box-shadow:</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s10">0</span><span class="s1"> </span><span class="s10">2px</span><span class="s1"> #A8AD97</span><span class="s7">;</span><span class="s1"> </span><span class="s2">border-radius:</span><span class="s1"> </span><span class="s10">0.5rem</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s3">&lt;</span><span class="s6">body</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-dormie-beige text-dormie-dark"</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">header</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center mb-10"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">h1</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"font-serif text-4xl sm:text-5xl text-dormie-dark"</span><span class="s3">&gt;</span><span class="s4">PDF Link Checker</span><span class="s3">&lt;/</span><span class="s6">h1</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mt-3 text-gray-500 text-base"</span><span class="s3">&gt;</span><span class="s1">A tool for Dormie to verify PDF hyperlinks.</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">header</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">main</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"pb-40"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Control Panel --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-dormie-offwhite border border-dormie-accent p-4 rounded-lg relative mb-8 flex flex-col sm:flex-row items-center justify-between shadow-sm gap-4"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex items-center"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">span</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"indicator-bulb"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"indicator-bulb bulb-yellow"</span><span class="s3">&gt;&lt;/</span><span class="s6">span</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">strong</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"indicator-title"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"font-semibold text-dormie-dark"</span><span class="s3">&gt;</span><span class="s4">Link Checker Status</span><span class="s3">&lt;/</span><span class="s6">strong</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"indicator-text"</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-sm text-gray-500"</span><span class="s3">&gt;</span><span class="s1">Checking activation status...</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"activate-button"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"px-5 py-2 bg-dormie-dark hover:bg-opacity-90 rounded-md text-white font-semibold transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"</span><span class="s3">&gt;</span><span class="s4">Activate Tool</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- File Upload Section --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"upload-container"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mb-8"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">label</span><span class="s4"> </span><span class="s2">for</span><span class="s3">=</span><span class="s1">"pdf-upload"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex flex-col items-center justify-center w-full h-48 border-2 border-dormie-accent border-dashed rounded-lg cursor-pointer bg-dormie-offwhite hover:bg-dormie-beige/50 transition-colors"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex flex-col items-center justify-center pt-5 pb-6"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">svg</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"w-10 h-10 mb-3 text-gray-300"</span><span class="s4"> </span><span class="s2">xmlns</span><span class="s3">=</span><span class="s1">"http://www.w3.org/2000/svg"</span><span class="s4"> </span><span class="s2">fill</span><span class="s3">=</span><span class="s1">"none"</span><span class="s4"> </span><span class="s2">viewBox</span><span class="s3">=</span><span class="s1">"0 0 24 24"</span><span class="s4"> </span><span class="s2">stroke-width</span><span class="s3">=</span><span class="s1">"1.5"</span><span class="s4"> </span><span class="s2">stroke</span><span class="s3">=</span><span class="s1">"currentColor"</span><span class="s3">&gt;&lt;</span><span class="s6">path</span><span class="s4"> </span><span class="s2">stroke-linecap</span><span class="s3">=</span><span class="s1">"round"</span><span class="s4"> </span><span class="s2">stroke-linejoin</span><span class="s3">=</span><span class="s1">"round"</span><span class="s4"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12l3 3m0 0l3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"</span><span class="s4"> </span><span class="s3">/&gt;&lt;/</span><span class="s6">svg</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mb-2 text-sm text-gray-500"</span><span class="s3">&gt;&lt;</span><span class="s6">span</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"font-semibold text-dormie-sage"</span><span class="s3">&gt;</span><span class="s4">Click to upload</span><span class="s3">&lt;/</span><span class="s6">span</span><span class="s3">&gt;</span><span class="s4"> or drag and drop</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-xs text-gray-400"</span><span class="s3">&gt;</span><span class="s1">PDF files only (scans page 2 only)</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s3">&lt;</span><span class="s6">input</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"pdf-upload"</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"file"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"hidden"</span><span class="s4"> </span><span class="s2">accept</span><span class="s3">=</span><span class="s1">".pdf"</span><span class="s4"> </span><span class="s2">multiple</span><span class="s4"> </span><span class="s3">/&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;/</span><span class="s6">label</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Loading Spinner --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"loading-spinner"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center my-10 hidden"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                 </span></span><span class="s3">&lt;</span><span class="s6">svg</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"animate-spin h-8 w-8 text-dormie-sage mx-auto"</span><span class="s4"> </span><span class="s2">xmlns</span><span class="s3">=</span><span class="s1">"http://www.w3.org/2000/svg"</span><span class="s4"> </span><span class="s2">fill</span><span class="s3">=</span><span class="s1">"none"</span><span class="s4"> </span><span class="s2">viewBox</span><span class="s3">=</span><span class="s1">"0 0 24 24"</span><span class="s3">&gt;&lt;</span><span class="s6">circle</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"opacity-25"</span><span class="s4"> </span><span class="s2">cx</span><span class="s3">=</span><span class="s1">"12"</span><span class="s4"> </span><span class="s2">cy</span><span class="s3">=</span><span class="s1">"12"</span><span class="s4"> </span><span class="s2">r</span><span class="s3">=</span><span class="s1">"10"</span><span class="s4"> </span><span class="s2">stroke</span><span class="s3">=</span><span class="s1">"currentColor"</span><span class="s4"> </span><span class="s2">stroke-width</span><span class="s3">=</span><span class="s1">"4"</span><span class="s3">&gt;&lt;/</span><span class="s6">circle</span><span class="s3">&gt;&lt;</span><span class="s6">path</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"opacity-75"</span><span class="s4"> </span><span class="s2">fill</span><span class="s3">=</span><span class="s1">"currentColor"</span><span class="s4"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"</span><span class="s3">&gt;&lt;/</span><span class="s6">path</span><span class="s3">&gt;&lt;/</span><span class="s6">svg</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"mt-2 text-gray-500"</span><span class="s3">&gt;</span><span class="s1">Processing files and checking links...</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;!-- Results Section --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"results-container"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">main</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;!-- Floating Review Widget --&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"review-widget"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"hidden fixed bottom-5 right-5 bg-dormie-offwhite/80 backdrop-blur-md p-3 rounded-lg shadow-2xl border border-dormie-accent w-64"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-sm font-semibold text-dormie-dark mb-2"</span><span class="s3">&gt;</span><span class="s4">Review Problem Links</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex items-center justify-between"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">span</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"problem-count"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-sm text-gray-600"</span><span class="s3">&gt;</span><span class="s4">0 links need attention</span><span class="s3">&lt;/</span><span class="s6">span</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"flex gap-2"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"prev-problem"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-2 bg-dormie-beige hover:bg-dormie-accent rounded-md text-dormie-dark transition-colors"</span><span class="s3">&gt;</span><span class="s4">&amp;lt;</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"next-problem"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"p-2 bg-dormie-beige hover:bg-dormie-accent rounded-md text-dormie-dark transition-colors"</span><span class="s3">&gt;</span><span class="s4">&amp;gt;</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"widget-notice"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"hidden mt-2 text-center text-sm bg-dormie-warn/10 text-dormie-warn p-2 rounded-md border border-dormie-warn/20"</span><span class="s3">&gt;&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">type</span><span class="s3">=</span><span class="s1">"module"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- DOM Elements ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">const</span><span class="s1"> uploadInput </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'pdf-upload'</span><span class="s7">),</span><span class="s1"> uploadContainer </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'upload-container'</span><span class="s7">),</span><span class="s1"> resultsContainer </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'results-container'</span><span class="s7">),</span><span class="s1"> loadingSpinner </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'loading-spinner'</span><span class="s7">),</span><span class="s1"> activateButton </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'activate-button'</span><span class="s7">),</span><span class="s1"> indicatorBulb </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'indicator-bulb'</span><span class="s7">),</span><span class="s1"> indicatorText </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'indicator-text'</span><span class="s7">),</span><span class="s1"> reviewWidget </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'review-widget'</span><span class="s7">),</span><span class="s1"> problemCountSpan </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'problem-count'</span><span class="s7">),</span><span class="s1"> prevProblemBtn </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'prev-problem'</span><span class="s7">),</span><span class="s1"> nextProblemBtn </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'next-problem'</span><span class="s7">),</span><span class="s1"> widgetNotice </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s8">'widget-notice'</span><span class="s7">);</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- State Variables ---</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s11">const</span><span class="s4"> </span><span class="s12">PROXY_URL</span><span class="s4"> </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'https://cors-anywhere.herokuapp.com/'</span><span class="s7">,</span><span class="s4"> </span><span class="s12">REQUEST_DELAY</span><span class="s4"> </span><span class="s7">=</span><span class="s4"> </span><span class="s13">500</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">let</span><span class="s1"> proxyCheckInterval </span><span class="s7">=</span><span class="s1"> </span><span class="s11">null</span><span class="s7">,</span><span class="s1"> linkQueue </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[],</span><span class="s1"> problematicLinks </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[],</span><span class="s1"> isQueueProcessing </span><span class="s7">=</span><span class="s1"> </span><span class="s11">false</span><span class="s7">,</span><span class="s1"> currentProblemIndex </span><span class="s7">=</span><span class="s1"> </span><span class="s7">-</span><span class="s13">1</span><span class="s7">;</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Activation &amp; Proxy Logic ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">function</span><span class="s1"> updateIndicator</span><span class="s7">(</span><span class="s1">color</span><span class="s7">,</span><span class="s1"> text</span><span class="s7">,</span><span class="s1"> isButtonEnabled </span><span class="s7">=</span><span class="s1"> </span><span class="s11">true</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>indicatorBulb</span><span class="s7">.</span><span class="s1">className </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`indicator-bulb bulb-</span><span class="s7">${</span><span class="s1">color</span><span class="s7">}</span><span class="s8">`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>indicatorText</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> text</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>activateButton</span><span class="s7">.</span><span class="s1">disabled </span><span class="s7">=</span><span class="s1"> </span><span class="s7">!</span><span class="s1">isButtonEnabled</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">async</span><span class="s1"> </span><span class="s11">function</span><span class="s1"> checkProxyStatus</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">try</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s11">const</span><span class="s4"> response </span><span class="s7">=</span><span class="s4"> </span><span class="s11">await</span><span class="s4"> fetch</span><span class="s7">(</span><span class="s1">`</span><span class="s7">${</span><span class="s12">PROXY_URL</span><span class="s7">}</span><span class="s1">https://example.com`</span><span class="s7">,</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> headers</span><span class="s7">:</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> </span><span class="s1">'X-Requested-With'</span><span class="s7">:</span><span class="s4"> </span><span class="s1">'XMLHttpRequest'</span><span class="s4"> </span><span class="s7">}</span><span class="s4"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">response</span><span class="s7">.</span><span class="s1">ok</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>updateIndicator</span><span class="s7">(</span><span class="s8">'green'</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'Ready to check links.'</span><span class="s7">,</span><span class="s1"> </span><span class="s11">false</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>activateButton</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s8">"Activated"</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">proxyCheckInterval</span><span class="s7">)</span><span class="s1"> clearInterval</span><span class="s7">(</span><span class="s1">proxyCheckInterval</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span><span class="s1"> </span><span class="s11">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span>updateIndicator</span><span class="s7">(</span><span class="s1">'red'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'Activation required. Click button to enable.'</span><span class="s7">,</span><span class="s4"> </span><span class="s11">true</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s11">catch</span><span class="s1"> </span><span class="s7">(</span><span class="s1">error</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span>updateIndicator</span><span class="s7">(</span><span class="s1">'red'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'Could not connect to activation service.'</span><span class="s7">,</span><span class="s4"> </span><span class="s11">true</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">proxyCheckInterval</span><span class="s7">)</span><span class="s1"> clearInterval</span><span class="s7">(</span><span class="s1">proxyCheckInterval</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>activateButton</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>window</span><span class="s7">.</span><span class="s1">open</span><span class="s7">(</span><span class="s8">`</span><span class="s7">${</span><span class="s12">PROXY_URL</span><span class="s7">}</span><span class="s8">corsdemo`</span><span class="s7">,</span><span class="s1"> </span><span class="s8">'_blank'</span><span class="s7">);</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span>updateIndicator</span><span class="s7">(</span><span class="s1">'yellow'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">'Waiting for activation in new tab...'</span><span class="s7">,</span><span class="s4"> </span><span class="s11">false</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">proxyCheckInterval</span><span class="s7">)</span><span class="s1"> clearInterval</span><span class="s7">(</span><span class="s1">proxyCheckInterval</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>proxyCheckInterval </span><span class="s7">=</span><span class="s1"> setInterval</span><span class="s7">(</span><span class="s1">checkProxyStatus</span><span class="s7">,</span><span class="s1"> </span><span class="s13">3000</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">});</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- File Handling &amp; Processing ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>uploadContainer</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'dragover'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">preventDefault</span><span class="s7">();</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">stopPropagation</span><span class="s7">();</span><span class="s1"> uploadContainer</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'label'</span><span class="s7">).</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'drag-over'</span><span class="s7">);</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>uploadContainer</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'dragleave'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">preventDefault</span><span class="s7">();</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">stopPropagation</span><span class="s7">();</span><span class="s1"> uploadContainer</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'label'</span><span class="s7">).</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'drag-over'</span><span class="s7">);</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>uploadContainer</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'drop'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">preventDefault</span><span class="s7">();</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">stopPropagation</span><span class="s7">();</span><span class="s1"> uploadContainer</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'label'</span><span class="s7">).</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'drag-over'</span><span class="s7">);</span><span class="s1"> handleFileSelection</span><span class="s7">({</span><span class="s1"> target</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> files</span><span class="s7">:</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">dataTransfer</span><span class="s7">.</span><span class="s1">files </span><span class="s7">}</span><span class="s1"> </span><span class="s7">});</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>uploadInput</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'change'</span><span class="s7">,</span><span class="s1"> handleFileSelection</span><span class="s7">);</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">async</span><span class="s1"> </span><span class="s11">function</span><span class="s1"> handleFileSelection</span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> files </span><span class="s7">=</span><span class="s1"> e</span><span class="s7">.</span><span class="s1">target</span><span class="s7">.</span><span class="s1">files</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">files </span><span class="s7">||</span><span class="s1"> files</span><span class="s7">.</span><span class="s1">length </span><span class="s7">===</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s11">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>resultsContainer</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>loadingSpinner</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>linkQueue </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[];</span><span class="s1"> problematicLinks </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[];</span><span class="s1"> currentProblemIndex </span><span class="s7">=</span><span class="s1"> </span><span class="s7">-</span><span class="s13">1</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>updateReviewWidget</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>widgetNotice</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">for</span><span class="s1"> </span><span class="s7">(</span><span class="s11">const</span><span class="s1"> file </span><span class="s11">of</span><span class="s1"> files</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">file</span><span class="s7">.</span><span class="s1">type </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'application/pdf'</span><span class="s7">)</span><span class="s1"> </span><span class="s11">await</span><span class="s1"> processPdf</span><span class="s7">(</span><span class="s1">file</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>loadingSpinner</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">isQueueProcessing</span><span class="s7">)</span><span class="s1"> processLinkQueue</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">async</span><span class="s1"> </span><span class="s11">function</span><span class="s1"> processPdf</span><span class="s7">(</span><span class="s1">file</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> fileId </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`file-</span><span class="s7">${</span><span class="s12">Date</span><span class="s7">.</span><span class="s1">now</span><span class="s7">()}</span><span class="s8">`</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s4"> fileResultHtml </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`&lt;div class="bg-dormie-offwhite rounded-lg shadow-sm mb-6" id="</span><span class="s7">${</span><span class="s4">fileId</span><span class="s7">}</span><span class="s1">"&gt;&lt;div class="p-4 border-b border-dormie-accent"&gt;&lt;h2 class="text-lg font-semibold text-dormie-dark truncate"&gt;</span><span class="s7">${</span><span class="s4">file</span><span class="s7">.</span><span class="s4">name</span><span class="s7">}</span><span class="s1">&lt;/h2&gt;&lt;/div&gt;&lt;div class="p-4 space-y-2"&gt;&lt;/div&gt;&lt;/div&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>resultsContainer</span><span class="s7">.</span><span class="s1">insertAdjacentHTML</span><span class="s7">(</span><span class="s8">'beforeend'</span><span class="s7">,</span><span class="s1"> fileResultHtml</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> listElement </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s1">fileId</span><span class="s7">).</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'.space-y-2'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> uniqueUrls </span><span class="s7">=</span><span class="s1"> </span><span class="s11">new</span><span class="s1"> </span><span class="s12">Map</span><span class="s7">();</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">try</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">const</span><span class="s1"> arrayBuffer </span><span class="s7">=</span><span class="s1"> </span><span class="s11">await</span><span class="s1"> file</span><span class="s7">.</span><span class="s1">arrayBuffer</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">const</span><span class="s1"> pdf </span><span class="s7">=</span><span class="s1"> </span><span class="s11">await</span><span class="s1"> pdfjsLib</span><span class="s7">.</span><span class="s1">getDocument</span><span class="s7">({</span><span class="s1"> data</span><span class="s7">:</span><span class="s1"> arrayBuffer </span><span class="s7">}).</span><span class="s1">promise</span><span class="s7">;</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">pdf</span><span class="s7">.</span><span class="s1">numPages </span><span class="s7">&lt;</span><span class="s1"> </span><span class="s13">2</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span>listElement</span><span class="s7">.</span><span class="s4">innerHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`&lt;p class="text-gray-500"&gt;This PDF has fewer than 2 pages. No links were scanned.&lt;/p&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s11">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">const</span><span class="s1"> page </span><span class="s7">=</span><span class="s1"> </span><span class="s11">await</span><span class="s1"> pdf</span><span class="s7">.</span><span class="s1">getPage</span><span class="s7">(</span><span class="s13">2</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">const</span><span class="s1"> annotations </span><span class="s7">=</span><span class="s1"> </span><span class="s11">await</span><span class="s1"> page</span><span class="s7">.</span><span class="s1">getAnnotations</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">const</span><span class="s1"> textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s11">await</span><span class="s1"> page</span><span class="s7">.</span><span class="s1">getTextContent</span><span class="s7">();</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>annotations</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">anno </span><span class="s7">=&gt;</span><span class="s1"> anno</span><span class="s7">.</span><span class="s1">subtype </span><span class="s7">===</span><span class="s1"> </span><span class="s8">'Link'</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> anno</span><span class="s7">.</span><span class="s1">url</span><span class="s7">).</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">anno </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s11">const</span><span class="s1"> url </span><span class="s7">=</span><span class="s1"> anno</span><span class="s7">.</span><span class="s1">url</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">uniqueUrls</span><span class="s7">.</span><span class="s1">has</span><span class="s7">(</span><span class="s1">url</span><span class="s7">))</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s11">const</span><span class="s1"> linkText </span><span class="s7">=</span><span class="s1"> findTextForAnnotation</span><span class="s7">(</span><span class="s1">anno</span><span class="s7">,</span><span class="s1"> textContent</span><span class="s7">)</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> </span><span class="s8">'Image or non-text link'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s11">const</span><span class="s1"> linkId </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`link-</span><span class="s7">${</span><span class="s12">Date</span><span class="s7">.</span><span class="s1">now</span><span class="s7">()}</span><span class="s8">-</span><span class="s7">${</span><span class="s12">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()}</span><span class="s8">`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>uniqueUrls</span><span class="s7">.</span><span class="s11">set</span><span class="s7">(</span><span class="s1">url</span><span class="s7">,</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> text</span><span class="s7">:</span><span class="s1"> linkText</span><span class="s7">,</span><span class="s1"> id</span><span class="s7">:</span><span class="s1"> linkId </span><span class="s7">});</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span></span><span class="s11">const</span><span class="s1"> listItem </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">createElement</span><span class="s7">(</span><span class="s8">'div'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>listItem</span><span class="s7">.</span><span class="s1">id </span><span class="s7">=</span><span class="s1"> linkId</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                        </span>listItem</span><span class="s7">.</span><span class="s4">className </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'p-3 bg-dormie-offwhite border border-dormie-accent rounded-lg flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 transition-shadow duration-300'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>listItem</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="flex-grow overflow-hidden"&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;p class="text-base font-semibold text-dormie-dark truncate" title="</span><span class="s7">${</span><span class="s4">linkText</span><span class="s7">}</span><span class="s1">"&gt;</span><span class="s7">${</span><span class="s4">linkText</span><span class="s7">}</span><span class="s1">&lt;/p&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;p class="text-xs text-gray-400 truncate"&gt;URL: &lt;a href="</span><span class="s7">${</span><span class="s4">url</span><span class="s7">}</span><span class="s1">" target="_blank" class="text-dormie-sage hover:underline"&gt;</span><span class="s7">${</span><span class="s4">url</span><span class="s7">}</span><span class="s1">&lt;/a&gt;&lt;/p&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;p class="text-xs text-gray-400 truncate final-url-container" style="display: none;"&gt;Final: &lt;span class="final-url text-gray-600"&gt;&lt;/span&gt;&lt;/p&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;div class="flex-shrink-0 flex items-center gap-3"&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="manual-actions hidden"&gt;&lt;/div&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;div class="status-container w-32 text-right"&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                    </span>&lt;span class="status-chip status-checking"&gt;&lt;span class="dot"&gt;&lt;/span&gt;Queued&lt;/span&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                                </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                            </span>&lt;/div&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>listElement</span><span class="s7">.</span><span class="s1">appendChild</span><span class="s7">(</span><span class="s1">listItem</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>linkQueue</span><span class="s7">.</span><span class="s1">push</span><span class="s7">({</span><span class="s1"> url</span><span class="s7">:</span><span class="s1"> url</span><span class="s7">,</span><span class="s1"> elementId</span><span class="s7">:</span><span class="s1"> linkId </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">});</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s11">if</span><span class="s4"> </span><span class="s7">(</span><span class="s4">uniqueUrls</span><span class="s7">.</span><span class="s4">size </span><span class="s7">===</span><span class="s4"> </span><span class="s13">0</span><span class="s7">)</span><span class="s4"> listElement</span><span class="s7">.</span><span class="s4">innerHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`&lt;p class="text-gray-500"&gt;No unique links found on page 2.&lt;/p&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s11">catch</span><span class="s1"> </span><span class="s7">(</span><span class="s1">error</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s1">fileId</span><span class="s7">).</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'.p-4'</span><span class="s7">).</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`&lt;p class="text-red-600"&gt;Could not process PDF.&lt;/p&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">function</span><span class="s1"> findTextForAnnotation</span><span class="s7">(</span><span class="s1">anno</span><span class="s7">,</span><span class="s1"> textContent</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> </span><span class="s7">[</span><span class="s1">x1</span><span class="s7">,</span><span class="s1"> y1</span><span class="s7">,</span><span class="s1"> x2</span><span class="s7">,</span><span class="s1"> y2</span><span class="s7">]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> anno</span><span class="s7">.</span><span class="s1">rect</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">let</span><span class="s1"> linkText </span><span class="s7">=</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">for</span><span class="s1"> </span><span class="s7">(</span><span class="s11">const</span><span class="s1"> item </span><span class="s11">of</span><span class="s1"> textContent</span><span class="s7">.</span><span class="s1">items</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">const</span><span class="s1"> tx </span><span class="s7">=</span><span class="s1"> item</span><span class="s7">.</span><span class="s1">transform</span><span class="s7">[</span><span class="s13">4</span><span class="s7">],</span><span class="s1"> ty </span><span class="s7">=</span><span class="s1"> item</span><span class="s7">.</span><span class="s1">transform</span><span class="s7">[</span><span class="s13">5</span><span class="s7">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">tx </span><span class="s7">&gt;=</span><span class="s1"> x1 </span><span class="s7">&amp;&amp;</span><span class="s1"> tx </span><span class="s7">&lt;=</span><span class="s1"> x2 </span><span class="s7">&amp;&amp;</span><span class="s1"> ty </span><span class="s7">&gt;=</span><span class="s1"> y1 </span><span class="s7">&amp;&amp;</span><span class="s1"> ty </span><span class="s7">&lt;=</span><span class="s1"> y2</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>linkText </span><span class="s7">+=</span><span class="s1"> item</span><span class="s7">.</span><span class="s1">str</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">return</span><span class="s1"> linkText</span><span class="s7">.</span><span class="s1">trim</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Link Checking Queue ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">async</span><span class="s1"> </span><span class="s11">function</span><span class="s1"> processLinkQueue</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>isQueueProcessing </span><span class="s7">=</span><span class="s1"> </span><span class="s11">true</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">linkQueue</span><span class="s7">.</span><span class="s1">length </span><span class="s7">===</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> isQueueProcessing </span><span class="s7">=</span><span class="s1"> </span><span class="s11">false</span><span class="s7">;</span><span class="s1"> </span><span class="s11">return</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> task </span><span class="s7">=</span><span class="s1"> linkQueue</span><span class="s7">.</span><span class="s1">shift</span><span class="s7">();</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> listItem </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s1">task</span><span class="s7">.</span><span class="s1">elementId</span><span class="s7">);</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s4"> </span><span class="s7">(</span><span class="s4">listItem</span><span class="s7">)</span><span class="s4"> listItem</span><span class="s7">.</span><span class="s4">querySelector</span><span class="s7">(</span><span class="s1">'.status-container'</span><span class="s7">).</span><span class="s4">innerHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`&lt;span class="status-chip status-checking"&gt;&lt;span class="dot"&gt;&lt;/span&gt;Checking&lt;/span&gt;`</span><span class="s7">;</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> isRateLimited </span><span class="s7">=</span><span class="s1"> </span><span class="s11">await</span><span class="s1"> checkLinkStatus</span><span class="s7">(</span><span class="s1">task</span><span class="s7">.</span><span class="s1">url</span><span class="s7">,</span><span class="s1"> task</span><span class="s7">.</span><span class="s1">elementId</span><span class="s7">);</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">isRateLimited</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>linkQueue</span><span class="s7">.</span><span class="s1">unshift</span><span class="s7">(</span><span class="s1">task</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>isQueueProcessing </span><span class="s7">=</span><span class="s1"> </span><span class="s11">false</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>handleRateLimitFallback</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>setTimeout</span><span class="s7">(</span><span class="s1">processLinkQueue</span><span class="s7">,</span><span class="s1"> </span><span class="s12">REQUEST_DELAY</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">function</span><span class="s1"> handleRateLimitFallback</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span>widgetNotice</span><span class="s7">.</span><span class="s4">textContent </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'Rate limit hit. Please check remaining links manually.'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>widgetNotice</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>reviewWidget</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>linkQueue</span><span class="s7">.</span><span class="s1">forEach</span><span class="s7">(</span><span class="s1">task </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">const</span><span class="s1"> listItem </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s1">task</span><span class="s7">.</span><span class="s1">elementId</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">listItem</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s11">const</span><span class="s1"> statusContainer </span><span class="s7">=</span><span class="s1"> listItem</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'.status-container'</span><span class="s7">);</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span>statusContainer</span><span class="s7">.</span><span class="s4">innerHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`&lt;span class="status-chip status-manual-required"&gt;&lt;span class="dot"&gt;&lt;/span&gt;Manual Check&lt;/span&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>problematicLinks</span><span class="s7">.</span><span class="s1">push</span><span class="s7">(</span><span class="s1">task</span><span class="s7">.</span><span class="s1">elementId</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>addManualActions</span><span class="s7">(</span><span class="s1">task</span><span class="s7">.</span><span class="s1">elementId</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>linkQueue </span><span class="s7">=</span><span class="s1"> </span><span class="s7">[];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>updateReviewWidget</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">async</span><span class="s1"> </span><span class="s11">function</span><span class="s1"> checkLinkStatus</span><span class="s7">(</span><span class="s1">url</span><span class="s7">,</span><span class="s1"> elementId</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> listItem </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s1">elementId</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">listItem</span><span class="s7">)</span><span class="s1"> </span><span class="s11">return</span><span class="s1"> </span><span class="s11">false</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> statusContainer </span><span class="s7">=</span><span class="s1"> listItem</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'.status-container'</span><span class="s7">),</span><span class="s1"> finalUrlContainer </span><span class="s7">=</span><span class="s1"> listItem</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'.final-url-container'</span><span class="s7">),</span><span class="s1"> finalUrlSpan </span><span class="s7">=</span><span class="s1"> listItem</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'.final-url'</span><span class="s7">);</span></p>
<p class="p7"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">let</span><span class="s1"> isOk </span><span class="s7">=</span><span class="s1"> </span><span class="s11">false</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">try</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">const</span><span class="s1"> response </span><span class="s7">=</span><span class="s1"> </span><span class="s11">await</span><span class="s1"> fetch</span><span class="s7">(</span><span class="s8">`</span><span class="s7">${</span><span class="s12">PROXY_URL</span><span class="s7">}${</span><span class="s1">url</span><span class="s7">}</span><span class="s8">`</span><span class="s7">,</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> headers</span><span class="s7">:</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s8">'X-Requested-With'</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'XMLHttpRequest'</span><span class="s1"> </span><span class="s7">}</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">let</span><span class="s1"> statusChip</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s11">if</span><span class="s4"> </span><span class="s7">(</span><span class="s4">response</span><span class="s7">.</span><span class="s4">ok</span><span class="s7">)</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> isOk </span><span class="s7">=</span><span class="s4"> </span><span class="s11">true</span><span class="s7">;</span><span class="s4"> statusChip </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'&lt;span class="status-chip status-ok"&gt;&lt;span class="dot"&gt;&lt;/span&gt;OK&lt;/span&gt;'</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span><span class="s4"><span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s11">else</span><span class="s4"> </span><span class="s11">if</span><span class="s4"> </span><span class="s7">(</span><span class="s4">response</span><span class="s7">.</span><span class="s4">status </span><span class="s7">===</span><span class="s4"> </span><span class="s13">403</span><span class="s7">)</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> statusChip </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`&lt;span class="status-chip status-blocked"&gt;&lt;span class="dot"&gt;&lt;/span&gt;Blocked&lt;/span&gt;`</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span><span class="s4"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">else</span><span class="s1"> </span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">response</span><span class="s7">.</span><span class="s1">status </span><span class="s7">===</span><span class="s1"> </span><span class="s13">429</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s11">return</span><span class="s1"> </span><span class="s11">true</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s11">else</span><span class="s4"> </span><span class="s7">{</span><span class="s4"> statusChip </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`&lt;span class="status-chip status-broken"&gt;&lt;span class="dot"&gt;&lt;/span&gt;Broken&lt;/span&gt;`</span><span class="s7">;</span><span class="s4"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>statusContainer</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> statusChip</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">const</span><span class="s1"> finalUrl </span><span class="s7">=</span><span class="s1"> response</span><span class="s7">.</span><span class="s1">url</span><span class="s7">.</span><span class="s1">replace</span><span class="s7">(</span><span class="s12">PROXY_URL</span><span class="s7">,</span><span class="s1"> </span><span class="s8">''</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">finalUrl </span><span class="s7">!==</span><span class="s1"> url</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> finalUrlSpan</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> finalUrl</span><span class="s7">;</span><span class="s1"> finalUrlContainer</span><span class="s7">.</span><span class="s1">style</span><span class="s7">.</span><span class="s1">display </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'block'</span><span class="s7">;</span><span class="s1"> </span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s11">catch</span><span class="s1"> </span><span class="s7">(</span><span class="s1">error</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span>statusContainer</span><span class="s7">.</span><span class="s4">innerHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">'&lt;span class="status-chip status-error"&gt;&lt;span class="dot"&gt;&lt;/span&gt;Error&lt;/span&gt;'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>finalUrlSpan</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'Could not reach server.'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>finalUrlContainer</span><span class="s7">.</span><span class="s1">style</span><span class="s7">.</span><span class="s1">display </span><span class="s7">=</span><span class="s1"> </span><span class="s8">'block'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">isOk</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>problematicLinks</span><span class="s7">.</span><span class="s1">push</span><span class="s7">(</span><span class="s1">elementId</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>addManualActions</span><span class="s7">(</span><span class="s1">elementId</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>updateReviewWidget</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">return</span><span class="s1"> </span><span class="s11">false</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p6"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Review Widget &amp; Manual Override Logic ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">function</span><span class="s1"> addManualActions</span><span class="s7">(</span><span class="s1">elementId</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> actionsContainer </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s1">elementId</span><span class="s7">)?.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'.manual-actions'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">actionsContainer</span><span class="s7">)</span><span class="s1"> </span><span class="s11">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>actionsContainer</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>actionsContainer</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`&lt;div class="flex gap-2"&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button title="Mark as OK" class="mark-ok-btn p-1.5 bg-green-500/10 hover:bg-green-500/20 rounded-md text-green-500/70 hover:text-green-600 transition-colors"&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /&gt;&lt;/svg&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>&lt;button title="Mark as Broken" class="mark-broken-btn p-1.5 bg-red-500/10 hover:bg-red-500/20 rounded-md text-red-500/70 hover:text-red-600 transition-colors"&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"&gt;&lt;path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /&gt;&lt;/svg&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</span></p>
<p class="p5"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>actionsContainer</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'.mark-ok-btn'</span><span class="s7">).</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> handleManualOverride</span><span class="s7">(</span><span class="s1">elementId</span><span class="s7">,</span><span class="s1"> </span><span class="s11">true</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>actionsContainer</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'.mark-broken-btn'</span><span class="s7">).</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> handleManualOverride</span><span class="s7">(</span><span class="s1">elementId</span><span class="s7">,</span><span class="s1"> </span><span class="s11">false</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">function</span><span class="s1"> handleManualOverride</span><span class="s7">(</span><span class="s1">elementId</span><span class="s7">,</span><span class="s1"> isMarkingOk</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> listItem </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s1">elementId</span><span class="s7">),</span><span class="s1"> statusContainer </span><span class="s7">=</span><span class="s1"> listItem</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'.status-container'</span><span class="s7">),</span><span class="s1"> actionsContainer </span><span class="s7">=</span><span class="s1"> listItem</span><span class="s7">.</span><span class="s1">querySelector</span><span class="s7">(</span><span class="s8">'.manual-actions'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">isMarkingOk</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span>statusContainer</span><span class="s7">.</span><span class="s4">innerHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`&lt;span class="status-chip status-manual-ok"&gt;&lt;span class="dot"&gt;&lt;/span&gt;Manual OK&lt;/span&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>problematicLinks </span><span class="s7">=</span><span class="s1"> problematicLinks</span><span class="s7">.</span><span class="s1">filter</span><span class="s7">(</span><span class="s1">id </span><span class="s7">=&gt;</span><span class="s1"> id </span><span class="s7">!==</span><span class="s1"> elementId</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>listItem</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'highlight-problem'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>updateReviewWidget</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s11">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span>statusContainer</span><span class="s7">.</span><span class="s4">innerHTML </span><span class="s7">=</span><span class="s4"> </span><span class="s1">`&lt;span class="status-chip status-manual-broken"&gt;&lt;span class="dot"&gt;&lt;/span&gt;Manual Broken&lt;/span&gt;`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>actionsContainer</span><span class="s7">.</span><span class="s1">innerHTML </span><span class="s7">=</span><span class="s1"> </span><span class="s8">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">function</span><span class="s1"> updateReviewWidget</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> count </span><span class="s7">=</span><span class="s1"> problematicLinks</span><span class="s7">.</span><span class="s1">length</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>reviewWidget</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">toggle</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">,</span><span class="s1"> count </span><span class="s7">===</span><span class="s1"> </span><span class="s13">0</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> widgetNotice</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">contains</span><span class="s7">(</span><span class="s8">'hidden'</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>problemCountSpan</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s8">`</span><span class="s7">${</span><span class="s1">count</span><span class="s7">}</span><span class="s8"> link</span><span class="s7">${</span><span class="s1">count </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s13">1</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s8">'s'</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> </span><span class="s8">''</span><span class="s7">}</span><span class="s8"> need attention`</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">count </span><span class="s7">===</span><span class="s1"> </span><span class="s13">0</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> currentProblemIndex </span><span class="s7">!==</span><span class="s1"> </span><span class="s7">-</span><span class="s13">1</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">problematicLinks</span><span class="s7">[</span><span class="s1">currentProblemIndex</span><span class="s7">])</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s1">problematicLinks</span><span class="s7">[</span><span class="s1">currentProblemIndex</span><span class="s7">])?.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'highlight-problem'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>currentProblemIndex </span><span class="s7">=</span><span class="s1"> </span><span class="s7">-</span><span class="s13">1</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s11">function</span><span class="s1"> navigateProblems</span><span class="s7">(</span><span class="s1">direction</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">problematicLinks</span><span class="s7">.</span><span class="s1">length </span><span class="s7">===</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s11">return</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">currentProblemIndex </span><span class="s7">!==</span><span class="s1"> </span><span class="s7">-</span><span class="s13">1</span><span class="s7">)</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s1">problematicLinks</span><span class="s7">[</span><span class="s1">currentProblemIndex</span><span class="s7">])?.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">remove</span><span class="s7">(</span><span class="s8">'highlight-problem'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>currentProblemIndex </span><span class="s7">=</span><span class="s1"> </span><span class="s7">(</span><span class="s1">currentProblemIndex </span><span class="s7">+</span><span class="s1"> direction </span><span class="s7">+</span><span class="s1"> problematicLinks</span><span class="s7">.</span><span class="s1">length</span><span class="s7">)</span><span class="s1"> </span><span class="s7">%</span><span class="s1"> problematicLinks</span><span class="s7">.</span><span class="s1">length</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">const</span><span class="s1"> element </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s1">problematicLinks</span><span class="s7">[</span><span class="s1">currentProblemIndex</span><span class="s7">]);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s11">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">element</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>element</span><span class="s7">.</span><span class="s1">classList</span><span class="s7">.</span><span class="s1">add</span><span class="s7">(</span><span class="s8">'highlight-problem'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>element</span><span class="s7">.</span><span class="s1">scrollIntoView</span><span class="s7">({</span><span class="s1"> behavior</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'smooth'</span><span class="s7">,</span><span class="s1"> block</span><span class="s7">:</span><span class="s1"> </span><span class="s8">'center'</span><span class="s1"> </span><span class="s7">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p7"><span class="s9"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>prevProblemBtn</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> navigateProblems</span><span class="s7">(-</span><span class="s13">1</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>nextProblemBtn</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s8">'click'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> navigateProblems</span><span class="s7">(</span><span class="s13">1</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>window</span><span class="s7">.</span><span class="s1">onload </span><span class="s7">=</span><span class="s1"> checkProxyStatus</span><span class="s7">;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
<p class="p7"><span class="s9"></span><br></p>
</body>
</html>
